<div class="max-w-5xl mx-auto p-6">
  <h1 class="text-2xl font-semibold mb-6">File CSV scaricati</h1>

  <div class="mb-6">
    <%= button_to "Aggiorna tutti i CSV", update_all_csv_get_data_path, method: :post,
      data: { confirm: "Importare (aggiornare) tutti i file CSV presenti? Verranno cancellati dopo l'importazione." },
      class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-800" %>
  </div>

  <% if @files.present? && @files.any? %>
    <div class="overflow-x-auto rounded-lg shadow">
      <table class="min-w-full text-sm text-left border border-gray-200">
        <thead class="bg-gray-100 text-gray-700">
          <tr>
            <th class="px-4 py-2 border-b">Nome file</th>
            <th class="px-4 py-2 border-b text-right">Dimensione (KB)</th>
            <th class="px-4 py-2 border-b text-center">Azioni</th>
          </tr>
        </thead>
        <tbody>
          <% @files.each do |name, size| %>
            <tr class="hover:bg-gray-50">
              <td class="px-4 py-2 border-b"><%= name %></td>
              <td class="px-4 py-2 border-b text-right"><%= (size / 1024.0).round(1) %></td>
              <td class="px-4 py-2 border-b text-center flex gap-2 justify-center">
                <%= button_to "Aggiorna",
                              update_csv_get_data_path(filename: name),
                              method: :post,
                              class: "inline-block bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700" %>

                <%= button_to "Elimina",
                              delete_csv_get_data_path(filename: name),
                              method: :post,
                              data: { confirm: "Sei sicuro di voler eliminare il file #{name}?" },
                              class: "inline-block bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-700" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <p class="text-gray-500">Nessun file CSV trovato in <code>public/download</code>.</p>
  <% end %>

  <div class="mt-6">
    <%= link_to "← Torna al form", in_get_g1_get_data_path, class: "text-blue-600 hover:underline" %>
  </div>
</div>